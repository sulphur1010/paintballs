<div class="wrapper">

   <%= render 'sidebar' %>
  
    <div class="main-panel expand">
        <!-- TODO Add Footer Partial -->
        <%= render partial: "members/navbar" %>


<div class="image-container set-full-height" >

  <br><br>

    <!--  Made With Paper Kit  -->
    <a href="#" class="made-with-pk">
      <div class="brand">IM</div>
      <div class="made-with">Designed by <strong>MustyTech</strong></div>
    </a>

          <div class="row">
            <div class="col-sm-10 col-sm-offset-1">

                    <div class="card wizard-card" data-color="orange" id="wizardProfile">
                        <form action="" method="">
                    <!--        You can switch " data-color="orange" "  with one of the next bright colors: "blue", "green", "orange", "red", "azure"          -->

                          <div class="wizard-header text-center">
                              <h3 class="wizard-title">Create Paintball Team</h3>
                  <p class="category">This information will be used to create Your Paintball Team</p>
                          </div>

                <div class="wizard-navigation">
                  <div class="progress-with-circle">
                       <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="3" style="width: 21%;"></div>
                  </div>
                  <ul>
                                  <li>
                      <a href="#about" data-toggle="tab">
                        <div class="icon-circle">
                          <i class="ti-info"></i>
                        </div>
                       Information
                      </a>
                    </li>
                                  <li>
                      <a href="#account" data-toggle="tab">
                        <div class="icon-circle">
                          <i class="ti-map"></i>
                        </div>
                        Address
                      </a>
                    </li>
                                  <li>
                      <a href="#address" data-toggle="tab">
                        <div class="icon-circle">
                          <i class="ti-user"></i>
                        </div>
                        Members
                      </a>
                    </li>
                              </ul>
                </div>
                            <div class="tab-content">
                                <div class="tab-pane" id="about">
                                  <div class="row">
                      <h5 class="info-text"> Please tell us more about your team.</h5>
                      <div class="col-sm-4 col-sm-offset-1">
                        <div class="picture-container">
                          <div class="picture">
                            <%= image_tag 'default-avatar.jpg', alt:"", class:"picture-src" %>
                            <input type="file" id="wizard-picture" name="logo">
                          </div>
                          <h6>Choose Logo</h6>
                          <small> Transparent 330 X 80 </small>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Team Name <small>(required)</small></label>
                          <input name="name" type="text" class="form-control" placeholder="The Dragons..">
                        </div>
                        <div class="form-group">
                          <label>Team Alias <small>(required)</small></label>
                          <input name="alias" type="text" class="form-control" placeholder="black warriors">
                        </div>
                      </div>
                      <div class="col-sm-10 col-sm-offset-1">
                        <div class="form-group">
                          <label>Email <small>(required)</small></label>
                          <input name="email" type="email" class="form-control" placeholder="club@gmail.com">
                        </div>
                      </div>
                    </div>
                                </div>
                                <div class="tab-pane" id="account">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <h5 class="info-text"> Location of your organization </h5>
                                            </div>
                                            <div class="col-sm-10 col-sm-offset-1">

                                                <div class="form-group">
                                                    <label>Address</label>
                                                    <input type="text" name="address" class="form-control" placeholder="Organization Address">
                                                </div>
                                            </div>

                                            <div class="col-sm-5 col-sm-offset-1">
                                                <div class="form-group">
                                                    <label>City</label>
                                                    <input type="text" name="city" class="form-control" placeholder="City">
                                                </div>
                                            </div>
                                            <div class="col-sm-5">
                                                <div class="form-group">
                                                    <label>Country</label><br>
                                                    <select name="country" class="form-control">
                                                        <option value="Nigeria"> Nigeria </option>
                                                        <option value="Albania"> Albania </option>
                                                        <option value="Algeria"> Algeria </option>
                                                        <option value="American Samoa"> American Samoa </option>
                                                        <option value="Andorra"> Andorra </option>
                                                        <option value="Angola"> Angola </option>
                                                        <option value="Anguilla"> Anguilla </option>
                                                        <option value="Antarctica"> Antarctica </option>
                                                        <option value="...">...</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                 <div class="tab-pane" id="address">
                                        <h5 class="info-text"> Add Members &nbsp;&nbsp;&nbsp; <btn id="add-collaborator" class='btn add-collaborator'><i class='ti-plus'></i></btn></h5>

                                        <div class="row">
                                            <div class="col-sm-10 col-sm-offset-1">

                                            <div id="collaborator-content" >
                                                <div class='row'>
                                                    <div class='col-sm-7'>
                                                     <div class='form-group'>
                                                        <input type='email' class='form-control collaborator'  placeholder='email' name="name33">
                                                    </div>
                                                    </div>
                                                    <div class='col-sm-3'>
                                                        <div class="form-group">
                                                            <select name='country' class='form-control'>
                                                                 <option value='1'> admin </option>
                                                                 <option value='2'> user</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class='col-sm-2'>
                                                         <btn class='btn box-shape remove-new-collaborator' ><i class='ti-close'></i></btn>
                                                    </div>
                                                </div>

                                                <div class='row'>
                                                    <div class='col-sm-7'>
                                                     <div class='form-group'>
                                                        <input type='email' class='form-control collaborator'  placeholder='email' name="name90">
                                                    </div>
                                                    </div>
                                                    <div class='col-sm-3'>
                                                        <div class="form-group">
                                                            <select name='country' class='form-control'>
                                                                 <option value='1'> admin </option>
                                                                 <option value='2'> user</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class='col-sm-2'>
                                                         <btn class='btn box-shape remove-new-collaborator' ><i class='ti-close'></i></btn>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- add csrf token -->
                                    <%= tag(:input, :type => "hidden", :name => request_forgery_protection_token.to_s, :value => form_authenticity_token) %> 

                                    <!-- hiddden user's id -->
                                    <input type="text" name="member_id" value="<%= @member.id %>" hidden >
                                    <!-- hidden stringify emails for collaboartions -->
                                    <input type="text" id="collaborate-json" name="collaborators_list"  hidden>

                                            </div>
                                        </div>


                                    </div>
                            </div>
                            <div class="wizard-footer">
                                <div class="pull-right">
                                    <input type='button' class='btn btn-next btn-fill btn-warning btn-wd' name='next' value='Next' />
                                    <input type='button' class='btn btn-finish btn-fill btn-warning btn-wd' id="finish" name='finish' value='Finish' />
                                </div>

                                <div class="pull-left">
                                    <input type='button' class='btn btn-previous btn-default btn-wd' name='previous' value='Previous' />
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </form>
                    </div>
            </div>
        </div><!-- end row -->



</div>

</div>
</div>


<script>

    // $('#tags').tagit({
    //     tagLimit: 4,
    //     placeholderText: "Add tags",
    //     onTagLimitExceeded : function(event, ui){
    //         // $("#indicator-tags").html("Tags cannot be more than four");
    //     }
    // });


    var counter = 0;
    $("#add-collaborator").click(function(){
        $("#collaborator-content").append(addCollaborator("name"+counter));
        counter++;
    });

    //  remove added collaborators
     $("#collaborator-content").on("click", ".remove-new-collaborator", function(){
        $(this).parents('div.row')[0].remove();
    });


    $("#finish").click(function(event){
         jsonObj = [];
         $("#collaborator-content").find(".row").each(function(index) {
             var emailObject = $(this).find("input");
             var email = emailObject.get(0).value ;
             var statusObject = $(this).find("option:selected");
             var status = statusObject.get(0).value;
             collaborateItem = {}
             collaborateItem["email"] = email;
             collaborateItem["status"] = status ;
             jsonObj.push(collaborateItem); 
    
        });
         $("#collaborate-json").val(JSON.stringify(jsonObj))
         $("#form").submit();
    });

function addCollaborator(name){
    var result = "<div class='row'>"+
                    "<div class='col-sm-7'>"+
                     "<div class='form-group'>"+
                        "<input type='email' class='form-control collaborator' name='"+name+"' placeholder='email'>"+
                    "</div>"+
                    "</div>"+
                    "<div class='col-sm-3'>"+
                        "<div class='form-group'>"+
                            "<select name='country' class='form-control'>"+
                                 "<option value='1'> admin </option>"+
                                 "<option value='2'> user</option>"+
                            "</select>"+
                        "</div>"+
                    "</div>"+
                    "<div class='col-sm-2'>"+
                         "<btn class='btn box-shape remove-new-collaborator' ><i class='ti-close'></i></btn>"+
                    "</div>"+
                "</div>" ;
    return result;
}


</script>

